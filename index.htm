<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>English Sentence Trainer</title>
    <style>
        /* === –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –î–∏–∑–∞–π–Ω (iPhone) === */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            padding: 110px 15px 15px 15px; 
            background-color: #f0f0f7; 
            color: #333;
            max-width: 414px; 
            margin-left: auto;
            margin-right: auto;
        }

        header {
            position: fixed;
            top: 0;
            left: 50%; 
            transform: translateX(-50%); 
            z-index: 1000; 
            width: calc(100% - 30px); 
            max-width: 414px; 
            text-align: center;
            padding: 10px;
            background-color: #fff;
            border-bottom-left-radius: 12px;
            border-bottom-right-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2); 
        }

        h1 {
            font-size: 1.5rem;
            color: #007aff; 
            margin: 0;
        }

        #score-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: #34c759; 
            margin-top: 10px;
        }

        .sentence-card {
            background-color: #fff;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        .russian-text {
            font-size: 1rem;
            margin-bottom: 15px; /* –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –æ—Ç—Å—Ç—É–ø */
            font-weight: 500;
            color: #555;
        }

        /* –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: –†–∞—Å–ø–æ–ª–∞–≥–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç—ã –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
        .input-group {
            display: flex;
            flex-direction: column; /* –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ */
            gap: 10px;
        }

        .english-input {
            width: 100%; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ */
            padding: 10px;
            font-size: 1rem;
            border: 1px solid #ccc;
            border-radius: 8px;
            transition: border-color 0.3s, background-color 0.3s;
            -webkit-appearance: none; 
            box-sizing: border-box; /* –í–∞–∂–Ω–æ, —á—Ç–æ–±—ã padding –Ω–µ —É–≤–µ–ª–∏—á–∏–≤–∞–ª –æ–±—â—É—é —à–∏—Ä–∏–Ω—É */
        }

        .english-input:focus {
            outline: none;
            border-color: #007aff;
            box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.3);
        }

        .check-button {
            /* –ö–Ω–æ–ø–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É */
            width: 100%; 
            padding: 12px 15px; /* –ù–µ–º–Ω–æ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–π –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –æ—Ç—Å—Ç—É–ø –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –Ω–∞–∂–∞—Ç–∏—è */
            font-size: 1rem;
            font-weight: 600;
            color: #fff;
            background-color: #007aff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, opacity 0.2s;
            -webkit-appearance: none;
        }

        .check-button:hover {
            background-color: #005bb5;
        }

        .check-button:active {
            opacity: 0.8;
        }

        /* Color Feedback */
        .correct {
            background-color: #e6ffed; 
            border-color: #34c759; 
        }

        .incorrect {
            background-color: #fff0f0; 
            border-color: #ff3b30; 
        }

        .feedback-text {
            margin-top: 10px;
            font-style: italic;
            font-size: 0.9rem;
            color: #888;
            min-height: 20px;
        }

        /* History Block Styles */
        #history-block {
            margin-top: 30px;
            padding: 15px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #history-block h2 {
            font-size: 1.2rem;
            color: #007aff;
            margin-top: 0;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        #history-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        #history-list li {
            padding: 8px 0;
            border-bottom: 1px solid #f0f0f7;
            font-size: 0.95rem;
            word-wrap: break-word; 
        }

        #history-list li:last-child {
            border-bottom: none;
        }

        .status-icon {
            font-weight: bold;
            margin-right: 8px;
        }

        .sentence-number {
            font-weight: bold;
            color: #555;
            margin-right: 5px;
        }
    </style>
</head>
<body>

    <header>
        <h1>English Sentence Trainer</h1>
        <div id="score-display">Score: 0</div>
    </header>

    <div id="sentences-container">
        </div>

    <div id="history-block">
        <h2>Your Attempts History</h2>
        <ul id="history-list">
            </ul>
    </div>
    <script>
        const sentences = [
            { ru: "–Ø –≤–∏–¥–µ–ª –∫–æ—à–∫—É –≤—á–µ—Ä–∞.", en: "I saw a cat yesterday." },
            { ru: "–û–Ω–∞ —Ö–æ—á–µ—Ç —Å—ä–µ—Å—Ç—å —è–±–ª–æ–∫–æ.", en: "She wants to eat an apple." },
            { ru: "–ú–æ–∂–µ—à—å –ø–µ—Ä–µ–¥–∞—Ç—å –º–Ω–µ —Å–æ–ª—å, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞?", en: "Can you pass me the salt, please?" },
            { ru: "–ú–Ω–µ –Ω—É–∂–Ω–æ –Ω–µ–º–Ω–æ–≥–æ —Å–∞—Ö–∞—Ä–∞ –¥–ª—è –∫–æ—Ñ–µ.", en: "I need some sugar for my coffee." },
            { ru: "–£ –≤–∞—Å –µ—Å—Ç—å –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å –≤–æ–ø—Ä–æ—Å—ã?", en: "Do you have any questions?" },
            { ru: "–û–Ω–∏ –∏–≥—Ä–∞—é—Ç –≤ —Ñ—É—Ç–±–æ–ª –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å.", en: "They are playing football right now." },
            { ru: "–£ –º–µ–Ω—è –µ—Å—Ç—å –Ω–æ–≤–∞—è –º–∞—à–∏–Ω–∞.", en: "I have a new car." },
            { ru: "–ú—ã –æ—Ç–ª–∏—á–Ω–æ –ø—Ä–æ–≤–µ–ª–∏ –≤—Ä–µ–º—è –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫–µ –≤—á–µ—Ä–∞.", en: "We had a great time at the party yesterday." },
            { ru: "–≠—Ç–∞ –∫–Ω–∏–≥–∞ –º–æ—è.", en: "The book is mine." },
            { ru: "–≠—Ç–æ —Ç–≤–æ—ë?", en: "Is it yours?" },
            { ru: "–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –±–ª–∏–∂–∞–π—à–∏–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω?", en: "Where is the nearest restaurant?" },
            { ru: "–ö–æ–≥–¥–∞ —Ç–≤–æ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è?", en: "When is your birthday?" },
            { ru: "–ü–æ—á–µ–º—É —Ç—ã –≥—Ä—É—Å—Ç–Ω—ã–π?", en: "Why are you sad?" },
            { ru: "–û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±–∞–Ω–∫–µ.", en: "He works in a bank." },
            { ru: "–ï–π –Ω—Ä–∞–≤–∏—Ç—Å—è —á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥–∏.", en: "She likes to read books." },
            { ru: "–î–∂–µ—Å—Å–∏–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–π –≤–µ—á–µ—Ä.", en: "Jessica studies every evening." },
            { ru: "–Ø –≤—Å–µ–≥–¥–∞ —á–∏—â—É –∑—É–±—ã –ø–µ—Ä–µ–¥ —Å–Ω–æ–º.", en: "I always brush my teeth before bed." },
            { ru: "–û–Ω–∏ –æ–±—ã—á–Ω–æ —Ö–æ–¥—è—Ç –Ω–∞ –ø—Ä–æ–≥—É–ª–∫—É –≤ –ø–∞—Ä–∫.", en: "They usually go for a walk in the park." },
            { ru: "–ú—ã —á–∞—Å—Ç–æ –µ–¥–∏–º –≤–Ω–µ –¥–æ–º–∞ –ø–æ –≤—ã—Ö–æ–¥–Ω—ã–º.", en: "We often eat out on weekends." },
            { ru: "–Ø –∏–Ω–æ–≥–¥–∞ –∑–∞–±—ã–≤–∞—é —Å–≤–æ–∏ –∫–ª—é—á–∏.", en: "I sometimes forget my keys." },
            { ru: "–û–Ω–∞ —Ä–µ–¥–∫–æ —Å–º–æ—Ç—Ä–∏—Ç —Ç–µ–ª–µ–≤–∏–∑–æ—Ä.", en: "She rarely watches TV." },
            { ru: "–û–Ω –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –µ—Å—Ç –º—è—Å–æ.", en: "He never eats meat." },
            { ru: "–Ø —Ö–æ–¥–∏–ª –≤ –º–∞–≥–∞–∑–∏–Ω –≤—á–µ—Ä–∞.", en: "I went to the shop yesterday." },
            { ru: "–û–Ω–∞ –ø–æ–∑–∞–≤—Ç—Ä–∞–∫–∞–ª–∞ —É—Ç—Ä–æ–º.", en: "She ate breakfast in the morning." },
            { ru: "–û–Ω–∏ —Å–º–æ—Ç—Ä–µ–ª–∏ —Ñ–∏–ª—å–º –ø—Ä–æ—à–ª–æ–π –Ω–æ—á—å—é.", en: "They saw a movie last night." },
            { ru: "–Ø –º–æ–≥—É –≥–æ–≤–æ—Ä–∏—Ç—å –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏?", en: "Can I speak English?" },
            { ru: "–û–Ω —É–º–µ–µ—Ç –∏–≥—Ä–∞—Ç—å –Ω–∞ –≥–∏—Ç–∞—Ä–µ?", en: "Can he play the guitar?" },
            { ru: "–î–∞–≤–∞–π –≤—Å—Ç—Ä–µ—Ç–∏–º—Å—è –≤ 3 —á–∞—Å–∞.", en: "Let's meet at 3 o'clock." },
            { ru: "–ú–æ–π –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –≤ –∏—é–ª–µ.", en: "My birthday is in July." },
            { ru: "–°–æ–±—Ä–∞–Ω–∏–µ –≤ –ø—è—Ç–Ω–∏—Ü—É.", en: "The meeting is on Friday." },
            { ru: "–Ø –ø–æ–µ–¥—É –Ω–∞ –ø–ª—è–∂ –∑–∞–≤—Ç—Ä–∞.", en: "I will go to the beach tomorrow." },
            { ru: "–û–Ω–∞ –ø–æ–∑–≤–æ–Ω–∏—Ç —Ç–µ–±–µ –ø–æ–∑–∂–µ?", en: "Will she call you later?" }
        ];

        let score = 0;
        const container = document.getElementById('sentences-container');
        const scoreDisplay = document.getElementById('score-display');
        const historyList = document.getElementById('history-list'); 

        // Function to normalize text
        function normalizeText(text) {
            return text.toLowerCase()
                       .replace(/['".,?!]/g, '')
                       .replace(/\s+/g, ' ') 
                       .trim();
        }

        // Function to log the attempt, now takes index (number)
        function logAttempt(index, userText, statusIcon) {
            const listItem = document.createElement('li');
            listItem.innerHTML = `<span class="sentence-number">${index + 1}.</span> <span class="status-icon">${statusIcon}</span> ${userText}`;
            historyList.prepend(listItem);
        }

        // Check function
        function checkSentence(index) {
            const card = document.getElementById(`card-${index}`);
            const input = document.getElementById(`input-${index}`);
            const feedback = document.getElementById(`feedback-${index}`);
            const correctText = sentences[index].en;
            
            const rawUserText = input.value; 

            const userAnswer = normalizeText(rawUserText);
            const correctAnswer = normalizeText(correctText);

            let attempts = parseInt(card.getAttribute('data-attempts')) || 0;

            if (userAnswer === correctAnswer) {
                // Correct
                let statusIcon = '‚úÖ';
                
                if (attempts === 0) {
                    // Correct on first attempt
                    score++;
                    scoreDisplay.textContent = `Score: ${score}`;
                    
                    input.value = correctText; 
                    input.classList.add('correct');
                    input.setAttribute('disabled', 'true');
                    feedback.textContent = "‚úÖ Correct! Great job.";
                    
                    logAttempt(index, rawUserText, statusIcon);

                } else {
                    // Correct on second attempt (don't count score)
                    input.value = correctText; 
                    input.classList.add('correct');
                    input.setAttribute('disabled', 'true');
                    feedback.textContent = "‚úÖ Correct on the second try.";
                }

                // Disable check button
                card.querySelector('.check-button').setAttribute('disabled', 'true');
                
            } else {
                // Incorrect
                attempts++;
                card.setAttribute('data-attempts', attempts);
                
                // –õ–æ–≥–∏—Ä—É–µ–º –Ω–µ–≤–µ—Ä–Ω—É—é –ø–æ–ø—ã—Ç–∫—É
                logAttempt(index, rawUserText, 'üö´');

                if (attempts === 1) {
                    // First attempt incorrect
                    input.classList.add('incorrect');
                    input.value = ""; // Clear text
                    feedback.textContent = "‚ùå Incorrect. Try again.";

                    // Remove 'incorrect' class briefly for flashing effect
                    setTimeout(() => {
                        input.classList.remove('incorrect');
                    }, 500);

                } else {
                    // Second attempt incorrect
                    input.value = correctText;
                    input.classList.remove('incorrect'); 
                    input.setAttribute('disabled', 'true'); 
                    card.querySelector('.check-button').setAttribute('disabled', 'true'); 
                    
                    // Show correct answer without color
                    feedback.textContent = `Correct answer: ${correctText}`;
                }
            }
        }

        // Generate sentence cards
        sentences.forEach((s, index) => {
            const card = document.createElement('div');
            card.className = 'sentence-card';
            card.id = `card-${index}`;
            card.setAttribute('data-attempts', '0'); // Attempts counter

            card.innerHTML = `
                <div class="russian-text">${index + 1}. ${s.ru}</div>
                <div class="input-group">
                    <input type="text" 
                           id="input-${index}" 
                           class="english-input" 
                           placeholder="Enter the English equivalent" 
                           aria-label="English equivalent">
                    <button class="check-button" 
                            onclick="checkSentence(${index})" 
                            aria-controls="feedback-${index}">
                        Check
                    </button>
                </div>
                <div id="feedback-${index}" class="feedback-text"></div>
            `;
            container.appendChild(card);
        });
    </script>
</body>
</html>